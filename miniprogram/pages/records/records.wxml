<view class="container">
  <view class="header">
    <text class="title">æŠ¥å·¥è®°å½•</text>
    <text class="subtitle">æŸ¥çœ‹å†å²æŠ¥å·¥è®°å½•</text>
  </view>

  <view class="records-list" wx:if="{{records.length > 0}}">
    <view class="record-card" wx:for="{{records}}" wx:key="id">
      <view class="record-header">
        <view class="record-info">
          <text class="order-no">{{item.order_no || 'æœªçŸ¥è®¢å•'}}</text>
          <text class="record-time">{{item.createtime ? formatTime(item.createtime) : 'æœªçŸ¥æ—¶é—´'}}</text>
        </view>
        <view class="status-badge {{item.status == 1 ? 'confirmed' : 'pending'}}">
          {{item.status == 1 ? 'å·²ç¡®è®¤' : 'å¾…ç¡®è®¤'}}
        </view>
      </view>
      
      <view class="record-content">
        <view class="product-title">{{item.product_name || 'æœªçŸ¥äº§å“'}} - {{item.model_name || 'æœªçŸ¥å‹å·'}}</view>
        
        <view class="record-details">
          <view class="detail-row">
            <text class="label">å·¥åº:</text>
            <text class="value">{{item.process_name || 'æœªçŸ¥'}}</text>
          </view>
          <view class="detail-row">
            <text class="label">æŠ¥å·¥æ•°é‡:</text>
            <text class="value">{{item.quantity}}</text>
          </view>
          <view class="detail-row">
            <text class="label">å·¥èµ„:</text>
            <text class="value wage">Â¥{{item.wage}}</text>
          </view>
          <view class="detail-row" wx:if="{{item.remark}}">
            <text class="label">å¤‡æ³¨:</text>
            <text class="value">{{item.remark}}</text>
          </view>
        </view>
      </view>
      
      <!-- å›¾ç‰‡å±•ç¤º -->
      <view class="image-section" wx:if="{{item.images && item.images.length > 0}}">
        <view class="image-header">
          <text class="image-title">å·¥ä½œå›¾ç‰‡</text>
          <text class="image-count">{{item.images.length}}å¼ </text>
        </view>
        <view class="image-list">
          <image wx:for="{{item.images}}" wx:key="*this" wx:for-item="img" 
                 src="{{img}}" mode="aspectFill" class="record-image" 
                 bindtap="previewImage" data-urls="{{item.images}}" data-current="{{img}}"/>
        </view>
      </view>
    </view>
  </view>

  <view class="empty-state" wx:else>
    <view class="empty-icon">ğŸ“Š</view>
    <text class="empty-title">æš‚æ— æŠ¥å·¥è®°å½•</text>
    <text class="empty-desc">è¿˜æ²¡æœ‰æäº¤è¿‡æŠ¥å·¥è®°å½•</text>
  </view>

  <view class="loading-container" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>
</view>